<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Fresh-Hub - Free Bootstrap 4 Template by Colorlib</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    
    <link href="https://fonts.googleapis.com/css?family=Poppins:200,300,400,500,600,700,800&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Lora:400,400i,700,700i&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Amatic+SC:400,700&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="/css/open-iconic-bootstrap.min.css">
    <link rel="stylesheet" href="/css/animate.css">
    
    <link rel="stylesheet" href="/css/owl.carousel.min.css">
    <link rel="stylesheet" href="/css/owl.theme.default.min.css">
    <link rel="stylesheet" href="/css/magnific-popup.css">

    <link rel="stylesheet" href="/css/aos.css">

    <link rel="stylesheet" href="/css/ionicons.min.css">

    <link rel="stylesheet" href="/css/bootstrap-datepicker.css">
    <link rel="stylesheet" href="/c/ss/jquery.timepicker.css">

    
    <link rel="stylesheet" href="/css/flaticon.css">
    <link rel="stylesheet" href="/css/icomoon.css">
    <link rel="stylesheet" href="/css/style.css">
  </head>
  <body class="goto-here">
		<div class="py-1 bg-success">
    	<div class="container">
    		<div class="row no-gutters d-flex align-items-start align-items-center px-md-0">
	    		<div class="col-lg-12 d-block">
		    		<div class="row d-flex">
		    			<div class="col-md pr-4 d-flex topper align-items-center">
					    	<div class="icon mr-2 d-flex justify-content-center align-items-center"><span class="icon-phone2"></span></div>
						    <span class="text">+91 9946340822</span>
					    </div>
					    <div class="col-md pr-4 d-flex topper align-items-center">
					    	<div class="icon mr-2 d-flex justify-content-center align-items-center"><span class="icon-paper-plane"></span></div>
						    <span class="text">freshHub@gmail.com</span>
					    </div>
					    <div class="col-md-5 pr-4 d-flex topper align-items-center text-lg-right">
						    <span class="text">3-5 Business days delivery &amp; Free Returns</span>
					    </div>
				    </div>
			    </div>
		    </div>
		  </div>
    </div>
 <nav class="navbar navbar-expand-lg navbar-dark ftco_navbar bg-dark ftco-navbar-danger" id="ftco-navbar">
  <div class="container">
    <a class="navbar-brand" href="/home"> Fresh-Hub</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#ftco-nav" aria-controls="ftco-nav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="oi oi-menu"></span> Menu
    </button>

    <div class="collapse navbar-collapse" id="ftco-nav">
      <ul class="navbar-nav ml-auto">
        <li class="nav-item active"><a href="/home" class="nav-link">Home</a></li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" id="dropdown04" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Shop</a>
          <div class="dropdown-menu" aria-labelledby="dropdown04">
            {{!-- <a class="dropdown-item" href="shop.html">Shop</a>
            <a class="dropdown-item" href="/wishlist">Wishlist</a>
            <a class="dropdown-item" href="product-single.html">Single Product</a> --}}
            <a class="dropdown-item" href="/cart">Cart</a>
            <a class="dropdown-item" href="checkout.html">Checkout</a>
          </div>
        </li>
        <li class="nav-item"><a href="/about" class="nav-link">About</a></li>
        <li class="nav-item"><a href="/contact" class="nav-link">Contact</a></li>
        
        <li class="nav-item cta cta-colored"><a href="/cart" class="nav-link"><span class="icon-shopping_cart"></span></a></li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" id="userDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">{{user.name}}</a>
          <div class="dropdown-menu" aria-labelledby="userDropdown">
            <a class="dropdown-item" href="profile">Profile</a>
            <a class="dropdown-item" href="/my-orders">your Orders</a>
            <div class="dropdown-divider"></div>
            <a class="dropdown-item" href="/logout">Logout</a>
          </div>
        </li>
      </ul>
    </div>
  </div>
</nav>





<!--Add address Modal -->
<div class="modal fade" id="exampleModalLong" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle"
  aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLongTitle">Add address</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form action="/address" method="post">
          <div class="form-group">
            <label for="edit-username">Name</label>
            <input type="text" class="form-control" name="name" id="edit-username">
          </div>
          <div class="form-group">
            <label for="edit-email">Mobile</label>
            <input type="number" class="form-control" name="mobile" id="edit-email">
          </div>
          <div class="form-group">
            <label for="edit-phone">Address</label>
            <input type="text" class="form-control" name="address" id="edit-phone">
          </div>
          <div class="form-group">
            <label for="edit-email">City</label>
            <input type="text" class="form-control" name="city" id="edit-email">
          </div>
          <div class="form-group">
            <label for="edit-email">state</label>
            <input type="text" class="form-control" name="state" id="edit-email">
          </div>
          <div class="form-group">
            <label for="edit-email">Pin code</label>
            <input type="number" class="form-control" name="pincode" id="edit-email">
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            <button type="submit" class="btn btn-primary add-button">Add</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>


<!--Edit address Modal -->
<div class="modal fade" id="editingAddress" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle"
  aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLongTitle">Edit address</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">

        <form action="/edit-address" method="post">
          <div class="form-group">
            <label for="edit-username">Name</label>
            <input type="text" class="form-control" name="name" id="edit-name" value="{{this.name}}" required>
          </div>
          <div class="form-group">
            <label for="edit-email">Mobile</label>
            <input type="text" class="form-control" name="mobile" id="edit-mobile" value="{{this.mobile}}" required>
          </div>
          <div class="form-group">
            <label for="edit-phone">Address</label>
            <input type="text" class="form-control" name="address" id="edit-address"
              value="{{this.address}}" required>
          </div>
         
          <div class="form-group">
            <label for="edit-email">City</label>
            <input type="text" class="form-control" name="city" id="edit-city" value="{{this.city}}" required>
          </div>
          <div class="form-group">
            <label for="edit-email">state</label>
            <input type="text" class="form-control" name="state" id="edit-state" value="{{this.state}}" required>
          </div>
          <div class="form-group">
            <label for="edit-email">Pin code</label>
            <input type="number" class="form-control" name="pincode" id="edit-pincode" value="{{this.pincode}}"
              required>
          </div>
          <input type="hidden" class="form-control" name="_id" id="edit-_id">
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            <button type="submit" class="btn btn-primary add-button">Edit</button>
          </div>
        </form>

      </div>
    </div>
  </div>
</div>

<div class="container template-container" style="
    margin-top: 135px;
">
 
   
      <button type="button" class="btn btn-primary add-address-button" data-toggle="modal"
        data-target="#exampleModalLong" style="margin-bottom: 10px;">
        Add address
      </button>

 
  {{#if addressDetails.length}}
  
<div class="row" > 
    {{#each addressDetails}}
    <div class="col-md-4 mb-4">
      <div class="card mb-4">
        <div class="card-header py-3">
          <h5 class="mb-0">ADDRESS DETAILS</h5>
        </div>
        {{#if this.is_default}}
        <span class="badge badge-dark">Default  Address</span>
        {{/if}}
        <div class="card-body">
          <!-- User Address Details -->
          <div class="address-details">

            <p class="address-value">{{this.name}}</p>


            <p class="address-value">{{this.mobile}}</p>


            <p class="address-value">{{this.address}}</p>


            <p class="address-value">{{this.city}}</p>


            <p class="address-value">{{this.state}}</p>


            <p class="address-value">{{this.pincode}}</p>

            <div class="address-actions">
              <button class="edit-button" data-toggle="modal" data-target="#editingAddress" data-name="{{this.name}}"
                data-mobile="{{this.mobile}}" data-address="{{this.address}}" data-city="{{this.city}}"
                data-state="{{this.state}}" data-pincode="{{this.pincode}}" data-_id="{{this._id}}">
                Edit
              </button>
              <a href="/delete-address?id={{this._id}}" class="delete-button">
               Delete
              </a>
             {{#if this.is_default}}
  
{{else}}
  <div>
    <br>
    <button type="button" class="btn btn-primary btn-sm make-default-button" onclick="setAsDefault('{{this._id}}')">Make as default address</button>
  </div>
{{/if}}
            </div>
          </div>
        </div>
      </div>
    </div>
    {{/each}}

  </div>
</div>
{{else}}
<section class="cart-section">
  <section class="h-100 h-custom" style="background-color: #f7f6fb;">
    <div class="container py-5 h-100">
      <div class="row d-flex justify-content-center align-items-center h-100">
        <div class="col-12">
          <div class="card card-registration card-registration-2" style="border-radius: 15px;">
            <div class="card-body p-0">
              <div class="row g-0">
                <div class="col-lg-12">
                  <div class="p-5">
                    <div class="text-center mb-4 empty-cart-animation">
                      <i class="bi bi-geo-alt-fill" style="font-size: 80px; color: #000;"></i>
                      <h3>Add Address</h3>
                    
                      <p>Add a new address to continue</p>
                    </div>
                    <div class="text-center mt-4">
                      <button type="button" class="btn btn-primary add-address-button" data-toggle="modal"
                        data-target="#exampleModalLong">
                        Add address
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
</section>
{{/if}}






<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<script>
  $(document).ready(function () {
    // Set the address details in the edit modal when the edit button is clicked
    $('.edit-button').click(function () {

      var name = $(this).data('name');
      var mobile = $(this).data('mobile');
      var address = $(this).data('address');
      var city = $(this).data('city');
      var state = $(this).data('state');
      var pincode = $(this).data('pincode');
      var _id = $(this).data('_id');

      $('#edit-name').val(name);
      $('#edit-mobile').val(mobile);
      $('#edit-address').val(address);
      $('#edit-city').val(city);
      $('#edit-state').val(state);
      $('#edit-pincode').val(pincode);
      $('#edit-_id').val(_id);
    });
  });
</script>

<script>
  function setAsDefault(addressId) {
   

fetch('/set-as-default', {
  method: 'POST',
  body: JSON.stringify({
    addressId: addressId,
  }),
  headers: {
    'Content-Type': 'application/json',
  },
})
  .then((response) => {
    if (response.status) {

      location.reload();
      
    } else {
      throw new Error('Request failed.');
    }
  })
  .catch((error) => {
    // Handle error
    console.error(error);
  });


  }
  </script>



<!-- loader -->
  <div id="ftco-loader" class="show fullscreen"><svg class="circular" width="48px" height="48px"><circle class="path-bg" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke="#eeeeee"/><circle class="path" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke-miterlimit="10" stroke="#F96D00"/></svg></div>



  <script src="/js/jquery.min.js"></script>
  <script src="/js/jquery-migrate-3.0.1.min.js"></script>
  <script src="/js/popper.min.js"></script>
  <script src="/js/bootstrap.min.js"></script>
  <script src="/js/jquery.easing.1.3.js"></script>
  <script src="/js/jquery.waypoints.min.js"></script>
  <script src="/js/jquery.stellar.min.js"></script>
  <script src="/js/owl.carousel.min.js"></script>
  <script src="/js/jquery.magnific-popup.min.js"></script>
  <script src="/js/aos.js"></script>
  <script src="/js/jquery.animateNumber.min.js"></script>
  <script src="/js/bootstrap-datepicker.js"></script>
  <script src="/js/scrollax.min.js"></script>
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBVWaKrjvy3MaE7SQ74_uJiULgl1JY0H2s&sensor=false"></script>
  <script src="/js/google-map.js"></script>
  <script src="/js/main.js"></script>
    
  </body>
</html>